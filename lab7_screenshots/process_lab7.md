# Labs 7

## 1 Часть

### 1.1 Создадим группу агрегированных каналов

`create link_aggregation group_id 1 type lacp`

### 1.2 Включим порты 1,3,5,7 в группу агрегирования каналов

Выберем 1/2 порт в качестве мастер-порта

Первый коммутатор (с сервером)

`config link_aggregation group_id 1 master_port 2 ports 2,4,6,8 state enable`

Второй коммутатор (с клиентами)

`config link_aggregation group_id 1 master_port 1 ports 1,3,5,7 state enable`

<img src="Снимок экрана от 2021-11-24 10-04-49.png" />

### 1.3 Настроим порты на работу в пассивном режиме

Первый (с сервером)

`config lacp_ports 2,4,6,8 mode passive`

Второй (с клиентами)

`config lacp_ports 1,3,5,7 mode active`

### 1.4 Проверим выполненные настройки

<img src="Снимок экрана от 2021-11-24 10-06-31.png" />

### 1.5 Проверим режим работы LACP на портах коммутатор

`show lacp_ports`

<img src="Снимок экрана от 2021-11-24 10-08-07.png" />

### 1.6 Посмотрим текущий алгоритм агрегирования каналов

`show link_aggregation algorithm`

<img src="Снимок экрана от 2021-11-24 10-12-26.png" />

### ...

Настройка коммутатора
`config ipif System ipaddress 10.1.1.11/8`

<img src="Снимок экрана от 2021-11-24 10-20-27.png" />

### 1.12 Запускаем на ПК1 и ПК2 программу iperf

`iperf -c 10.1.1.250 -i 1 -t 1000 -r -u -b10M -P5`

<img src="Снимок экрана от 2021-11-24 10-26-56.png" />
> запрос на сервер

### 1.13 Проверим загрузку портов на обоих коммутаторах во время теста

<img src="Снимок экрана от 2021-11-24 10-29-21.png" />
> ~~загрузка коммутаторов во время теста (шторм)~~

<img src="Снимок экрана от 2021-11-24 11-15-55.png" />

> загрузка коммутаторов во время теста

<img src="Снимок экрана от 2021-11-24 11-15-52.png" />

